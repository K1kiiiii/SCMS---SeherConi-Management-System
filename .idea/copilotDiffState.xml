<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/scms/service/AssignmentService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/scms/service/AssignmentService.java" />
              <option name="originalContent" value="package com.scms.service;&#10;&#10;import com.scms.dao.AssignmentDao;&#10;import com.scms.model.Assignment;&#10;&#10;import java.sql.SQLException;&#10;import java.util.List;&#10;&#10;public class AssignmentService {&#10;&#10;    private final AssignmentDao dao = new AssignmentDao();&#10;&#10;    public Assignment assignMaterial(int userId, int materialId, double qty) {&#10;        if (userId &lt;= 0) throw new ServiceException(&quot;user.invalid&quot;);&#10;        if (materialId &lt;= 0) throw new ServiceException(&quot;material.invalid&quot;);&#10;        if (qty &lt;= 0) throw new ServiceException(&quot;quantity.invalid&quot;);&#10;&#10;        try {&#10;            Assignment a = new Assignment();&#10;            a.setUserId(userId);&#10;            a.setMaterialId(materialId);&#10;            a.setQuantity(qty);&#10;            return dao.create(a);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri kreiranju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    // kreiranje zahtjeva&#10;    public Assignment requestMaterial(int userId, int materialId, double qty, String notes) {&#10;        if (userId &lt;= 0) throw new ServiceException(&quot;user.invalid&quot;);&#10;        if (materialId &lt;= 0) throw new ServiceException(&quot;material.invalid&quot;);&#10;        if (qty &lt;= 0) throw new ServiceException(&quot;quantity.invalid&quot;);&#10;&#10;        try {&#10;            Assignment a = new Assignment();&#10;            a.setUserId(userId);&#10;            a.setMaterialId(materialId);&#10;            a.setQuantity(qty);&#10;            a.setStatus(&quot;PENDING&quot;);&#10;            a.setNotes(notes);&#10;            return dao.createRequest(a);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri kreiranju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment getAssignment(int id) {&#10;        try {&#10;            return dao.findById(id).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public List&lt;Assignment&gt; listAssignmentsForUser(int userId) {&#10;        try {&#10;            return dao.findByUserId(userId);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public List&lt;Assignment&gt; listAll() {&#10;        try {&#10;            return dao.findAll();&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment approveRequest(int assignmentId) {&#10;        try {&#10;            return dao.approveRequest(assignmentId).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri odobravanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment rejectRequest(int assignmentId, String reason) {&#10;        try {&#10;            return dao.rejectRequest(assignmentId, reason).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri odbijanju zahtjeva&quot;, ex);&#10;&#10;        }&#10;    }&#10;&#10;    public void removeAssignment(int id) {&#10;        try {&#10;            if (!dao.delete(id)) throw new ServiceException(&quot;assignment.not_found&quot;);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri brisanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.scms.service;&#10;&#10;import com.scms.dao.AssignmentDao;&#10;import com.scms.model.Assignment;&#10;&#10;import java.sql.SQLException;&#10;import java.util.List;&#10;&#10;public class AssignmentService {&#10;&#10;    private final AssignmentDao dao = new AssignmentDao();&#10;&#10;    public Assignment assignMaterial(int userId, int materialId, double qty) {&#10;        if (userId &lt;= 0) throw new ServiceException(&quot;user.invalid&quot;);&#10;        if (materialId &lt;= 0) throw new ServiceException(&quot;material.invalid&quot;);&#10;        if (qty &lt;= 0) throw new ServiceException(&quot;quantity.invalid&quot;);&#10;&#10;        try {&#10;            Assignment a = new Assignment();&#10;            a.setUserId(userId);&#10;            a.setMaterialId(materialId);&#10;            a.setQuantity(qty);&#10;            return dao.create(a);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri kreiranju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    // kreiranje zahtjeva&#10;    public Assignment requestMaterial(int userId, int materialId, double qty, String notes) {&#10;        if (userId &lt;= 0) throw new ServiceException(&quot;user.invalid&quot;);&#10;        if (materialId &lt;= 0) throw new ServiceException(&quot;material.invalid&quot;);&#10;        if (qty &lt;= 0) throw new ServiceException(&quot;quantity.invalid&quot;);&#10;&#10;        try {&#10;            Assignment a = new Assignment();&#10;            a.setUserId(userId);&#10;            a.setMaterialId(materialId);&#10;            a.setQuantity(qty);&#10;            a.setStatus(&quot;PENDING&quot;);&#10;            a.setNotes(notes);&#10;            return dao.createRequest(a);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri kreiranju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment getAssignment(int id) {&#10;        try {&#10;            return dao.findById(id).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public List&lt;Assignment&gt; listAssignmentsForUser(int userId) {&#10;        try {&#10;            return dao.findByUserId(userId);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public List&lt;Assignment&gt; listAll() {&#10;        try {&#10;            return dao.findAll();&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri dobavljanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment approveRequest(int assignmentId) {&#10;        try {&#10;            return dao.approveRequest(assignmentId).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri odobravanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;&#10;    public Assignment rejectRequest(int assignmentId, String reason) {&#10;        try {&#10;            return dao.rejectRequest(assignmentId, reason).orElseThrow(() -&gt; new ServiceException(&quot;assignment.not_found&quot;));&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri odbijanju zahtjeva&quot;, ex);&#10;&#10;        }&#10;    }&#10;&#10;    public void removeAssignment(int id) {&#10;        try {&#10;            if (!dao.delete(id)) throw new ServiceException(&quot;assignment.not_found&quot;);&#10;        } catch (SQLException ex) {&#10;            throw new ServiceException(&quot;Greška pri brisanju zahtjeva&quot;, ex);&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/scms/util/ResultSetMapper.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/scms/util/ResultSetMapper.java" />
              <option name="originalContent" value="package com.scms.util;&#10;&#10;import com.scms.model.*;&#10;&#10;import java.sql.ResultSet;&#10;import java.sql.SQLException;&#10;import java.sql.Timestamp;&#10;&#10;public class ResultSetMapper {&#10;&#10;    public static User mapUser(ResultSet rs) throws SQLException {&#10;        User u = new User();&#10;        u.setId(rs.getInt(&quot;id&quot;));&#10;        u.setUsername(rs.getString(&quot;username&quot;));&#10;        try { u.setPasswordHash(rs.getString(&quot;password_hash&quot;)); } catch (SQLException ignored) {}&#10;        u.setRole(rs.getString(&quot;role&quot;));&#10;        return u;&#10;    }&#10;&#10;    public static Role mapRole(ResultSet rs) throws SQLException {&#10;        Role r = new Role();&#10;        r.setId(rs.getInt(&quot;id&quot;));&#10;        r.setName(rs.getString(&quot;name&quot;));&#10;        r.setDescription(rs.getString(&quot;description&quot;));&#10;        return r;&#10;    }&#10;&#10;    public static Material mapMaterial(ResultSet rs) throws SQLException {&#10;        Material m = new Material();&#10;        m.setId(rs.getInt(&quot;id&quot;));&#10;        m.setName(rs.getString(&quot;name&quot;));&#10;        m.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        m.setUnit(rs.getString(&quot;unit&quot;));&#10;        m.setSupplier(rs.getString(&quot;supplier&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;updated_at&quot;);&#10;        if (t != null) m.setUpdatedAt(t.toLocalDateTime());&#10;        return m;&#10;    }&#10;&#10;    public static Assignment mapAssignment(ResultSet rs) throws SQLException {&#10;        Assignment a = new Assignment();&#10;        a.setId(rs.getInt(&quot;id&quot;));&#10;        a.setUserId(rs.getInt(&quot;user_id&quot;));&#10;        a.setMaterialId(rs.getInt(&quot;material_id&quot;));&#10;        a.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;assigned_at&quot;);&#10;        if (t != null) a.setAssignedAt(t.toLocalDateTime());&#10;        try { a.setStatus(rs.getString(&quot;status&quot;)); } catch (SQLException ignored) {}&#10;        try { a.setNotes(rs.getString(&quot;notes&quot;)); } catch (SQLException ignored) {}&#10;        return a;&#10;    }&#10;&#10;    public static Recipe mapRecipe(ResultSet rs) throws SQLException {&#10;        Recipe r = new Recipe();&#10;        r.setId(rs.getInt(&quot;id&quot;));&#10;        r.setName(rs.getString(&quot;name&quot;));&#10;        r.setDescription(rs.getString(&quot;description&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;created_at&quot;);&#10;        if (t != null) r.setCreatedAt(t.toLocalDateTime());&#10;        return r;&#10;    }&#10;&#10;    public static RecipeItem mapRecipeItem(ResultSet rs) throws SQLException {&#10;        RecipeItem ri = new RecipeItem();&#10;        ri.setId(rs.getInt(&quot;id&quot;));&#10;        ri.setRecipeId(rs.getInt(&quot;recipe_id&quot;));&#10;        ri.setMaterialId(rs.getInt(&quot;material_id&quot;));&#10;        ri.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        ri.setUnit(rs.getString(&quot;unit&quot;));&#10;        return ri;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.scms.util;&#10;&#10;import com.scms.model.*;&#10;&#10;import java.sql.ResultSet;&#10;import java.sql.SQLException;&#10;import java.sql.Timestamp;&#10;&#10;public class ResultSetMapper {&#10;&#10;    public static User mapUser(ResultSet rs) throws SQLException {&#10;        User u = new User();&#10;        u.setId(rs.getInt(&quot;id&quot;));&#10;        u.setUsername(rs.getString(&quot;username&quot;));&#10;        try { u.setPasswordHash(rs.getString(&quot;password_hash&quot;)); } catch (SQLException ignored) {}&#10;        u.setRole(rs.getString(&quot;role&quot;));&#10;        return u;&#10;    }&#10;&#10;    public static Role mapRole(ResultSet rs) throws SQLException {&#10;        Role r = new Role();&#10;        r.setId(rs.getInt(&quot;id&quot;));&#10;        r.setName(rs.getString(&quot;name&quot;));&#10;        r.setDescription(rs.getString(&quot;description&quot;));&#10;        return r;&#10;    }&#10;&#10;    public static Material mapMaterial(ResultSet rs) throws SQLException {&#10;        Material m = new Material();&#10;        m.setId(rs.getInt(&quot;id&quot;));&#10;        m.setName(rs.getString(&quot;name&quot;));&#10;        m.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        m.setUnit(rs.getString(&quot;unit&quot;));&#10;        m.setSupplier(rs.getString(&quot;supplier&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;updated_at&quot;);&#10;        if (t != null) m.setUpdatedAt(t.toLocalDateTime());&#10;        return m;&#10;    }&#10;&#10;    public static Assignment mapAssignment(ResultSet rs) throws SQLException {&#10;        Assignment a = new Assignment();&#10;        a.setId(rs.getInt(&quot;id&quot;));&#10;        a.setUserId(rs.getInt(&quot;user_id&quot;));&#10;        a.setMaterialId(rs.getInt(&quot;material_id&quot;));&#10;        a.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;assigned_at&quot;);&#10;        if (t != null) a.setAssignedAt(t.toLocalDateTime());&#10;        try { a.setStatus(rs.getString(&quot;status&quot;)); } catch (SQLException ignored) {}&#10;        try { a.setNotes(rs.getString(&quot;notes&quot;)); } catch (SQLException ignored) {}&#10;        return a;&#10;    }&#10;&#10;    public static Recipe mapRecipe(ResultSet rs) throws SQLException {&#10;        Recipe r = new Recipe();&#10;        r.setId(rs.getInt(&quot;id&quot;));&#10;        r.setName(rs.getString(&quot;name&quot;));&#10;        r.setDescription(rs.getString(&quot;description&quot;));&#10;        Timestamp t = rs.getTimestamp(&quot;created_at&quot;);&#10;        if (t != null) r.setCreatedAt(t.toLocalDateTime());&#10;        return r;&#10;    }&#10;&#10;    public static RecipeItem mapRecipeItem(ResultSet rs) throws SQLException {&#10;        RecipeItem ri = new RecipeItem();&#10;        ri.setId(rs.getInt(&quot;id&quot;));&#10;        ri.setRecipeId(rs.getInt(&quot;recipe_id&quot;));&#10;        ri.setMaterialId(rs.getInt(&quot;material_id&quot;));&#10;        ri.setQuantity(rs.getDouble(&quot;quantity&quot;));&#10;        ri.setUnit(rs.getString(&quot;unit&quot;));&#10;        return ri;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>